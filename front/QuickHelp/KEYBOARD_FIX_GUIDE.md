# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –¥–ª—è —á–∞—Ç–∞, –Ω–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –µ–µ —Å–∫—Ä—ã—Ç—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **1. –î–æ–±–∞–≤–ª–µ–Ω FocusState –≤ MessageInputView**
```swift
@FocusState private var isTextFieldFocused: Bool
```

### **2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ**
```swift
.onSubmit {
    if canSend {
        onSend()
        isTextFieldFocused = false  // –°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    } else {
        isTextFieldFocused = false  // –°–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
    }
}
```

### **3. –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤–æ" –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ**
```swift
.submitLabel(.done)
```

### **4. Tap gesture –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**
```swift
.onTapGesture {
    KeyboardManager.dismissKeyboard()
}
```

### **5. –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π**
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `KeyboardManager.swift` —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- `KeyboardManager.dismissKeyboard()` - –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —Å–∫—Ä—ã—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- `dismissKeyboardOnTap()` - —Å–∫—Ä—ã—Ç—å –ø—Ä–∏ —Ç–∞–ø–µ –≤–Ω–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
- `hideKeyboardOnDisappear()` - —Å–∫—Ä—ã—Ç—å –ø—Ä–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–∏ view

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### **MessageInputView.swift:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `@FocusState`
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ì–æ—Ç–æ–≤–æ"
- ‚úÖ Tap gesture –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### **ChatView.swift:**
- ‚úÖ Tap gesture –Ω–∞ ScrollView –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `KeyboardManager` –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞

### **KeyboardManager.swift:**
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- ‚úÖ Extension –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ Observer –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã—Å–æ—Ç—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ì–æ—Ç–æ–≤–æ"
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ç–∞–ø–µ –≤–Ω–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
- ‚úÖ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ç–∞–ø–µ –Ω–∞ –æ–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏/—Å–∫—Ä—ã—Ç–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:

```swift
@StateObject private var keyboardObserver = KeyboardHeightObserver()

// –í view:
.animation(.easeInOut(duration: 0.3), value: keyboardObserver.keyboardHeight)
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –ø–ª–∞–≤–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∏ —Å–∫—Ä—ã—Ç–∏–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. 