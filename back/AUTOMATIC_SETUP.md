# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Chatbot System

## üéØ –¶–µ–ª—å —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º:
   - –¶–∏—Ç–∞—Ç—É –¥–Ω—è
   - –†–∞–Ω–¥–æ–º–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ–º—ã
   - –†–∞–Ω–¥–æ–º–Ω—ã–µ –≤–∏–¥–µ–æ —Å YouTube –Ω–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ–º—ã

2. **–í–æ –≤—Ä–µ–º—è –±–µ—Å–µ–¥—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–º—É –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ —Ü–∏—Ç–∞—Ç—ã
   - –ü–æ–¥–±–∏—Ä–∞–µ–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–∏–¥–µ–æ —Å YouTube
   - –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω:
```bash
# macOS
brew services start redis

# Linux
sudo systemctl start redis

# –ü—Ä–æ–≤–µ—Ä–∫–∞
redis-cli ping
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—é —Å–∏—Å—Ç–µ–º—É –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:
```bash
python start_system.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç:
- ‚úÖ Celery Worker (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏)
- ‚úÖ Celery Beat (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á)
- ‚úÖ Flower (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á)
- ‚úÖ FastAPI Server (–æ—Å–Ω–æ–≤–Ω–æ–π API)

## üìã –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã:
- **–ß–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ü–∏—Ç–∞—Ç—ã, —Å—Ç–∞—Ç—å–∏)
- **–ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–µ–º
- **–ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ö–∞–∂–¥—ã–π —á–∞—Å**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ–º

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–º—ã –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π –∏ —Ü–∏—Ç–∞—Ç –¥–ª—è —ç—Ç–æ–π —Ç–µ–º—ã
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–∏–¥–µ–æ –Ω–∞ YouTube

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

### –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
- `GET /content/initial` - –ù–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /chat` - –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–µ–º
- `GET /user/{user_id}/recommendations` - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- `http://localhost:8000/docs` - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `http://localhost:5555` - Flower (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery –∑–∞–¥–∞—á)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –≤ `celery_app.py`:

```python
celery_app.conf.beat_schedule = {
    "initialize-startup-content": {
        "task": "tasks.initialize_startup_content",
        "schedule": 60.0,  # –ß–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
    },
    "generate-daily-content": {
        "task": "tasks.generate_daily_content",
        "schedule": 1800.0,  # –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
    },
    "generate-content-for-all-topics": {
        "task": "tasks.generate_content_for_all_topics",
        "schedule": 3600.0,  # –ö–∞–∂–¥—ã–π —á–∞—Å
    },
    "update-popular-topics": {
        "task": "tasks.update_popular_topics",
        "schedule": 900.0,  # –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
    },
    "cleanup-old-content": {
        "task": "tasks.cleanup_old_content",
        "schedule": 86400.0,  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
    },
}
```

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

### 1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```swift
// –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
let initialContent = await apiClient.getInitialContent()
// –ü–æ–∫–∞–∑–∞—Ç—å: —Ü–∏—Ç–∞—Ç–∞ –¥–Ω—è + —Ä–∞–Ω–¥–æ–º–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ + —Ä–∞–Ω–¥–æ–º–Ω—ã–µ –≤–∏–¥–µ–æ
```

### 2. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```swift
// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
let response = await apiClient.sendMessage(message, mode: mode, userId: userId)
// response —Å–æ–¥–µ—Ä–∂–∏—Ç topic_task_id –∏ recommendations_task_id
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
```swift
// –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
let recommendations = await apiClient.getUserRecommendations(userId: userId)
// –°–æ–¥–µ—Ä–∂–∏—Ç: —Å—Ç–∞—Ç—å–∏, —Ü–∏—Ç–∞—Ç—ã, –≤–∏–¥–µ–æ –ø–æ —Ç–µ–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞:
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –º–æ–Ω–∏—Ç–æ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ Flower

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Celery Worker: `celery -A celery_app worker --loglevel=info`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Celery Beat: `celery -A celery_app beat --loglevel=info`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `http://localhost:5555`

### –ï—Å–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis
brew services restart redis  # macOS
sudo systemctl restart redis  # Linux
```

### –ï—Å–ª–∏ API –∫–ª—é—á–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É: `python start_system.py` 